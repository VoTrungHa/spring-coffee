"use strict";(self.webpackChunkcoffeev2=self.webpackChunkcoffeev2||[]).push([[559],{8559:(R,p,s)=>{s.r(p),s.d(p,{AccountsModule:()=>L});var d=s(9808),u=s(8966),h=s(4521),v=s(137),a=s(3075),e=s(5e3),g=s(621);function _(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," \u0110\u1ecba ch\u1ec9 email c\xf2n tr\u1ed1ng "),e.qZA())}function C(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," \u0110\u1ecba chi email kh\xf4ng h\u1ee3p l\u1ec7 "),e.qZA())}function T(n,r){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,_,2,0,"div",22),e.YNc(2,C,2,0,"div",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.email)}}function Z(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Nh\u1eadp H\u1ecd t\xean c\u1ee7a b\u1ea1n "),e.qZA())}function N(n,r){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,Z,2,0,"div",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.nickName||null==t.nickName.errors?null:t.nickName.errors.required)}}function E(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Ch\u1ecdn gi\u1edbi t\xednh"),e.qZA())}function S(n,r){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,E,2,0,"div",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.gender||null==t.gender.errors?null:t.gender.errors.required)}}function b(n,r){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function q(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Ch\u1ecdn ch\u1ee9c v\u1ee5"),e.qZA())}function I(n,r){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,q,2,0,"div",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.role||null==t.role.errors?null:t.role.errors.required)}}function M(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),e.qZA())}function F(n,r){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,M,2,0,"div",22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.phone||null==t.phone.errors?null:t.phone.errors.required)}}let U=(()=>{class n{constructor(t,o,i){this.data=t,this.dialogRef=o,this.accountService=i,this.ROLES=["USER","ADMIN"],this.isValidator=!1,this.AccountForm=new a.cw({id:new a.NI(""),nickName:new a.NI("",[a.kI.required]),gender:new a.NI("Nam",[a.kI.required]),email:new a.NI("",[a.kI.required,a.kI.email]),phone:new a.NI("",[a.kI.required]),role:new a.NI("USER",[a.kI.required])})}ngOnInit(){var t,o,i,l,c,m;this.data.account&&(null===(t=this.AccountForm.get("nickName"))||void 0===t||t.setValue(this.data.account.nickName),null===(o=this.AccountForm.get("id"))||void 0===o||o.setValue(this.data.account.id),null===(i=this.AccountForm.get("role"))||void 0===i||i.setValue(this.data.account.role),null===(l=this.AccountForm.get("phone"))||void 0===l||l.setValue(this.data.account.phone),null===(c=this.AccountForm.get("gender"))||void 0===c||c.setValue(this.data.account.gender),null===(m=this.AccountForm.get("email"))||void 0===m||m.setValue(this.data.account.email))}get nickName(){return this.AccountForm.get("nickName")}get phone(){return this.AccountForm.get("phone")}get role(){return this.AccountForm.get("role")}get gender(){return this.AccountForm.get("gender")}get email(){return this.AccountForm.get("email")}setValidator(){this.isValidator=!0}save(){this.dialogRef.close(this.AccountForm.value)}close(){this.dialogRef.close(null)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.WI),e.Y36(u.so),e.Y36(g.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-account-modal"]],decls:45,vars:8,consts:[[1,"modal-account"],[1,"modal-account-title"],[1,"modal-account-body"],[3,"formGroup"],[1,"form-group"],["for","name",1,"form-label"],[1,"form-control-input"],["type","email","formControlName","email","placeholder","example@example.com","required","",1,"forminput"],["class","alert alert-danger",4,"ngIf"],[1,"form-group","mt-15"],["type","text","id","name","placeholder","Nguy\u1ec5n V\u0103n A","formControlName","nickName","required","",1,"forminput"],[1,"form-label"],[1,"form-control-input","mt-5"],["type","radio","value","Nam","name","gender","formControlName","gender"],["type","radio","name","gender","formControlName","gender","value","N\u1eef"],["id","lop","formControlName","role",1,"forminput"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","","formControlName","phone","required","",1,"forminput"],[1,"form-group","d-flex","flex-end","mt-15"],["type","button",1,"button","bg-remove",3,"click"],[1,"button","bg-second",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"form",3),e.TgZ(6,"div",4),e.TgZ(7,"label",5),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"input",7),e.YNc(11,T,3,2,"div",8),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"label",5),e._uU(14,"Name"),e.qZA(),e.TgZ(15,"div",6),e._UZ(16,"input",10),e.YNc(17,N,2,1,"div",8),e.qZA(),e.qZA(),e.TgZ(18,"div",9),e.TgZ(19,"label",11),e._uU(20,"Gender"),e.qZA(),e.TgZ(21,"div",12),e._UZ(22,"input",13),e._uU(23," Male "),e._UZ(24,"input",14),e._uU(25," Female "),e.YNc(26,S,2,1,"div",8),e.qZA(),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"label",11),e._uU(29,"Role"),e.qZA(),e.TgZ(30,"div",12),e.TgZ(31,"select",15),e.YNc(32,b,2,2,"option",16),e.qZA(),e.YNc(33,I,2,1,"div",8),e.qZA(),e.qZA(),e.TgZ(34,"div",9),e.TgZ(35,"label",11),e._uU(36,"Phone"),e.qZA(),e.TgZ(37,"div",12),e._UZ(38,"input",17),e.YNc(39,F,2,1,"div",8),e.qZA(),e.qZA(),e.TgZ(40,"div",18),e.TgZ(41,"button",19),e.NdJ("click",function(){return o.close()}),e._uU(42," Cancel "),e.qZA(),e.TgZ(43,"button",20),e.NdJ("click",function(){return null!=o.email&&o.email.errors||null!=o.nickName&&o.nickName.errors||null!=o.phone&&o.phone.errors||null!=o.role&&o.role.errors||null!=o.gender&&o.gender.errors?o.setValidator():o.save()}),e._uU(44," Ok "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(o.data.title),e.xp6(2),e.Q6J("formGroup",o.AccountForm),e.xp6(6),e.Q6J("ngIf",(null==o.email?null:o.email.errors)&&o.isValidator),e.xp6(6),e.Q6J("ngIf",(null==o.nickName?null:o.nickName.errors)&&o.isValidator),e.xp6(9),e.Q6J("ngIf",(null==o.gender?null:o.gender.errors)&&o.isValidator),e.xp6(6),e.Q6J("ngForOf",o.ROLES),e.xp6(1),e.Q6J("ngIf",(null==o.role?null:o.role.errors)&&o.isValidator),e.xp6(6),e.Q6J("ngIf",(null==o.phone?null:o.phone.errors)&&o.isValidator))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.Q7,d.O5,a._,a.EJ,d.sg,a.YN,a.Kr],styles:[".modal-account[_ngcontent-%COMP%]{width:500px}.modal-account-title[_ngcontent-%COMP%]{background-color:#fda026f5;padding:.5rem 1rem}.modal-account-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:NotoSerif;font-weight:600}.modal-account-body[_ngcontent-%COMP%]{display:block;margin-top:15px;position:relative;padding:.5rem 1rem;max-height:450px;overflow-y:auto}"]}),n})();var A=s(385),k=s(2831),y=s(6794),f=s(2290),J=s(7407),O=s(9055),Y=s(7027);const D=[{path:"",component:(()=>{class n{constructor(t,o,i,l,c){this.accountService=t,this.dialog=o,this.servicePublic=i,this.toastr=l,this.loadService=c,this.Accounts=[],this.CONTENTS_LIST_WIDTH=k.v,this.params={current_page:1,limit:5,sort:"nickName",reverse:!0,total_records:0,delete_all:!1},this.start=0,this.end=5}ngOnInit(){this.loadAll()}loadAll(){this.loadService.start(),this.accountService.getAccounts().subscribe(t=>{this.params.total_records=t.length,this.Accounts=t.slice(this.start,this.end)}),this.loadService.stop()}paramsChange(t){this.findStart(),this.findEnd(),this.loadAll()}handlDeleteMultiple(){const t=new u.vA;t.disableClose=!0,t.autoFocus=!0,t.data={title:"X\xf3a t\xe0i kho\u1ea3n",message:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a t\xe0i nh\u1eefng kho\u1ea3n n\xe0y kh\xf4ng?"},this.dialog.open(A.z,t).afterClosed().subscribe(i=>{i&&(this.loadService.start(),this.Accounts.map(l=>{(null==l?void 0:l.completed)&&this.accountService.deleteAccount(l.id).subscribe()}),this.toastr.success("Th\xe0nh c\xf4ng!","X\xf3a ng\u01b0\u1eddi d\xf9ng"),this.loadAll(),this.params.delete_all=!1,this.loadService.stop())})}findStart(){this.start=(this.params.current_page-1)*this.params.limit}findEnd(){const t=this.params.current_page*this.params.limit;this.end=t>this.params.total_records?this.params.total_records:t}sortAll(t){this.params.current_page=1,this.params.sort=t,this.loadAll()}handlSearch(t){this.loadService.start(),this.accountService.getAccounts().subscribe(o=>{this.Accounts=o.filter((i,l)=>-1!==i.email.toLowerCase().indexOf(t.toLowerCase())||-1!==i.role.toLowerCase().indexOf(t.toLowerCase())||-1!==i.nickName.toLowerCase().indexOf(t.toLowerCase())||-1!==i.phone.toLowerCase().indexOf(t.toLowerCase())||-1!==i.gender.toLowerCase().indexOf(t.toLowerCase())),this.params.total_records=this.Accounts.length,this.Accounts=this.Accounts.slice(this.start,this.end),this.loadService.stop()})}handlDeleteAccount(t){const o=new u.vA;o.disableClose=!0,o.autoFocus=!0,o.data={title:"X\xf3a t\xe0i kho\u1ea3n",message:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a t\xe0i kho\u1ea3n n\xe0y kh\xf4ng?"},this.dialog.open(A.z,o).afterClosed().subscribe(l=>{l&&(this.loadService.start(),this.accountService.deleteAccount(t).subscribe(c=>{this.toastr.success("Th\xe0nh c\xf4ng!","X\xf3a ng\u01b0\u1eddi d\xf9ng"),this.loadAll(),this.loadService.stop()}))})}openDialog(t){const o=new u.vA;o.disableClose=!0,o.autoFocus=!0,o.data=t?{title:"Updated account",account:t}:{title:"Created account",account:null},this.dialog.open(U,o).afterClosed().subscribe(l=>{t&&l&&(this.loadService.start(),this.accountService.updateAccount(l).subscribe(c=>{this.toastr.success("Th\xe0nh c\xf4ng!","C\u1eadp nh\u1eadt ng\u01b0\u1eddi d\xf9ng"),this.loadAll(),this.loadService.stop()})),l&&!t&&(this.loadService.start(),l.id=this.servicePublic.Makeid(12),this.accountService.addAccount(l).subscribe(c=>{this.toastr.success("Th\xe0nh c\xf4ng!","T\u1ea1o ng\u01b0\u1eddi d\xf9ng!"),this.loadAll(),this.loadService.stop()}))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.B),e.Y36(u.uw),e.Y36(y.m),e.Y36(f._W),e.Y36(J.LA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-accounts"]],decls:4,vars:4,consts:[[1,"mod-account"],[3,"title","modal","search","delete"],[1,"mod-account-body"],[3,"data","params","CONTENTS_LIST_WIDTH","modal","paramsChange","sortAll","delete"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"app-search",1),e.NdJ("modal",function(l){return o.openDialog(l)})("search",function(l){return o.handlSearch(l)})("delete",function(){return o.handlDeleteMultiple()}),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"app-apptable",3),e.NdJ("modal",function(l){return o.openDialog(l)})("paramsChange",function(l){return o.paramsChange(l)})("sortAll",function(l){return o.sortAll(l)})("delete",function(l){return o.handlDeleteAccount(l)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("title","ACCOUNT MANAGEMENT"),e.xp6(2),e.Q6J("data",o.Accounts)("params",o.params)("CONTENTS_LIST_WIDTH",o.CONTENTS_LIST_WIDTH))},directives:[O.g,Y.q],styles:[".mod-account-body[_ngcontent-%COMP%]{margin-top:27px}"]}),n})(),canActivate:[v.a]}];let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.Bz.forChild(D)],h.Bz]}),n})();var x=s(5642);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,w,a.UX,x.K,u.Is,f.Rh]]}),n})()}}]);