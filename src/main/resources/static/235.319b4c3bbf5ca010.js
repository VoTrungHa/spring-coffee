"use strict";(self.webpackChunkcoffeev2=self.webpackChunkcoffeev2||[]).push([[235],{9235:(ee,h,d)=>{d.r(h),d.d(h,{CoffeesModule:()=>W});var g=d(9808),v=d(4521),b=d(137);function _(r,a,t,o,i,n,s){try{var u=r[n](s),p=u.value}catch(j){return void t(j)}u.done?a(p):Promise.resolve(p).then(o,i)}var y=d(2831),c=d(8966),C=d(385),l=d(3075),e=d(5e3),Z=d(520),f=d(8505),m=d(262),E=d(9646);let T=(()=>{class r{constructor(t){this.http=t,this.optionHeader={headers:new Z.WM({"Content-Type":"application/json"})}}getProduct(){return this.http.get("api/products").pipe((0,f.b)(t=>console.log("fetched products")),(0,m.K)(this.handleError("getProducts",[])))}deleteProduct(t){return this.http.delete("api/products/"+t,this.optionHeader).pipe((0,f.b)(o=>console.log(`deleted product id=${t}`)),(0,m.K)(this.handleError("deleteProducys")))}updateProduct(t){return this.http.put("api/products",t,this.optionHeader).pipe((0,f.b)(o=>console.log(`updated product id=${t.id}`)),(0,m.K)(this.handleError("updateProduct")))}getProductById(t){return this.http.get("api/products/"+t).pipe((0,f.b)(o=>console.log(`fetched product id=${t}`)),(0,m.K)(this.handleError(`getProduct id=${t}`)))}addProduct(t){return this.http.post("api/products",t,this.optionHeader).pipe((0,f.b)(o=>console.log("added product  ")),(0,m.K)(this.handleError("addProduct")))}handleError(t="operation",o){return i=>(console.error(i),console.log(`${t} failed: ${i.message}`),(0,E.of)(o))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Z.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function P(r,a){if(1&r&&(e.TgZ(0,"div",26),e._UZ(1,"img",27),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.image?null:t.image.value,e.LSH)("alt","logo")}}function M(r,a){1&r&&(e.TgZ(0,"div"),e._uU(1,"T\xean s\u1ea3n c\xf2n tr\u1ed1ng"),e.qZA())}function N(r,a){if(1&r&&(e.TgZ(0,"div",28),e.YNc(1,M,2,0,"div",29),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.name||null==t.name.errors?null:t.name.errors.required)}}function x(r,a){if(1&r&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t," ")}}function S(r,a){1&r&&(e.TgZ(0,"div"),e._uU(1,"M\xf4 t\u1ea3 c\xf2n tr\u1ed1ng"),e.qZA())}function I(r,a){if(1&r&&(e.TgZ(0,"div",28),e.YNc(1,S,2,0,"div",29),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.category||null==t.category.errors?null:t.category.errors.required)}}function F(r,a){if(1&r&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t," ")}}function J(r,a){1&r&&(e.TgZ(0,"div"),e._uU(1," Ch\u1ecdn k\u1ecbch th\u01b0\u1edbc s\u1ea3n ph\u1ea9m "),e.qZA())}function U(r,a){if(1&r&&(e.TgZ(0,"div",28),e.YNc(1,J,2,0,"div",29),e.qZA()),2&r){const t=e.oxw().$implicit;let o;e.xp6(1),e.Q6J("ngIf",null==(o=t.get("size"))||null==o.errors?null:o.errors.required)}}function Y(r,a){1&r&&(e.TgZ(0,"div"),e._uU(1," Gi\xe1 th\xe0nh c\xf2n tr\u1ed1ng "),e.qZA())}function D(r,a){if(1&r&&(e.TgZ(0,"div",28),e.YNc(1,Y,2,0,"div",29),e.qZA()),2&r){const t=e.oxw().$implicit;let o;e.xp6(1),e.Q6J("ngIf",null==(o=t.get("price"))||null==o.errors?null:o.errors.required)}}function O(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index;return e.oxw().deleteAttr(i)}),e._UZ(2,"span",35),e.qZA(),e.qZA()}}function Q(r,a){if(1&r&&(e.TgZ(0,"div",31),e.TgZ(1,"div",16),e.TgZ(2,"select",32),e.TgZ(3,"option",13),e._uU(4,"K\xedch th\u01b0\u1edbc"),e.qZA(),e.YNc(5,F,2,2,"option",14),e.qZA(),e.YNc(6,U,2,1,"div",10),e.qZA(),e.TgZ(7,"div",16),e._UZ(8,"input",33),e.YNc(9,D,2,1,"div",10),e.qZA(),e.YNc(10,O,3,0,"div",29),e.qZA()),2&r){const t=a.$implicit,o=a.index,i=e.oxw();let n,s;e.Q6J("formGroupName",o),e.xp6(5),e.Q6J("ngForOf",i.Sizes),e.xp6(1),e.Q6J("ngIf",(null==(n=t.get("size"))?null:n.errors)&&i.isValidator),e.xp6(3),e.Q6J("ngIf",(null==(s=t.get("price"))?null:s.errors)&&i.isValidator),e.xp6(1),e.Q6J("ngIf",i.attributes.length>1)}}function z(r,a){1&r&&(e.TgZ(0,"div"),e._uU(1,"M\xf4 t\u1ea3 c\xf2n tr\u1ed1ng"),e.qZA())}function w(r,a){if(1&r&&(e.TgZ(0,"div",28),e.YNc(1,z,2,0,"div",29),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.descript||null==t.descript.errors?null:t.descript.errors.required)}}function L(r,a){1&r&&(e.TgZ(0,"div"),e._uU(1," \u1ea2nh c\u1ee7a s\u1ea3n ph\u1ea9m c\xf2n tr\u1ed1ng "),e.qZA())}function k(r,a){if(1&r&&(e.TgZ(0,"div",28),e.YNc(1,L,2,0,"div",29),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.image||null==t.image.errors?null:t.image.errors.required)}}let V=(()=>{class r{constructor(t,o,i,n){this.data=t,this.dialogRef=o,this.fb=i,this.coffeeService=n,this.isValidator=!1,this.Categorys=["C\xe0 ph\xea","Gi\u1ea3i kh\xe1t","N\u01b0\u1edbc su\u1ed1i","Sinh t\u1ed1"],this.Sizes=["M","L","XL"],this.isLoading=!1,this.ProductForm=this.fb.group({name:["",l.kI.required],id:[""],category:["",l.kI.required],image:["",l.kI.required],attributes:this.fb.array([this.fb.group({size:["",l.kI.required],price:["",l.kI.required]})]),descript:["",l.kI.required]})}ngOnInit(){var t,o,i,n,s;this.data.product&&(null===(t=this.ProductForm.get("name"))||void 0===t||t.setValue(this.data.product.name),null===(o=this.ProductForm.get("id"))||void 0===o||o.setValue(this.data.product.id),null===(i=this.ProductForm.get("descript"))||void 0===i||i.setValue(this.data.product.descript),null===(n=this.ProductForm.get("image"))||void 0===n||n.setValue(this.data.product.image),null===(s=this.ProductForm.get("category"))||void 0===s||s.setValue(this.data.product.category),this.attributes.removeAt(0),this.data.product.attributes.map(u=>{this.attributes.push(this.fb.group({size:u.size,price:u.price}))}))}get attributes(){return this.ProductForm.get("attributes")}get name(){return this.ProductForm.get("name")}get descript(){return this.ProductForm.get("descript")}get image(){return this.ProductForm.get("image")}get category(){return this.ProductForm.get("category")}addAttr(){this.attributes.push(this.fb.group({size:["",l.kI.required],price:["",l.kI.required]}))}deleteAttr(t){this.attributes.removeAt(t)}setValidator(){this.isValidator=!0}save(){console.log(this.ProductForm.value),this.dialogRef.close(this.ProductForm.value)}close(){this.dialogRef.close(null)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(c.WI),e.Y36(c.so),e.Y36(l.qu),e.Y36(T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-coffee-modal"]],decls:48,vars:9,consts:[[1,"mod-coffe"],[1,"mod-coffe-title"],[1,"headline","size-2"],[3,"formGroup"],[1,"mod-coffe-body"],["class","text-center avatar",4,"ngIf"],[1,"form-group","mt-15"],["for","name",1,"form-label"],[1,"form-control-input"],["type","text","formControlName","name","placeholder","T\xean s\u1ea3n ph\u1ea9m","required","",1,"forminput"],["class","alert alert-danger",4,"ngIf"],[1,"form-label"],["formControlName","category",1,"forminput"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formArrayName","attributes",1,"form-group","mt-15"],[1,"w-100"],["class","gap-8 mt-15 d-flex form-control-input",3,"formGroupName",4,"ngFor","ngForOf"],[1,"d-flex","flex-end","mt-15"],[1,"bg-second","button",3,"click"],["data-icon","fluent:add-circle-16-filled","data-width","25","data-height","25",1,"iconify",2,"color","white"],["type","text","cols","2","formControlName","descript","placeholder","M\xf4 t\u1ea3",1,"forminput"],["type","text","formControlName","image","placeholder","T\xean s\u1ea3n ph\u1ea9m","required","",1,"forminput"],[1,"form-group","d-flex","mod-coffe-action","flex-end","mt-15"],["type","button",1,"button","bg-remove",3,"click"],[1,"button","bg-second",3,"click"],[1,"text-center","avatar"],["width","100%","height","100%",3,"src","alt"],[1,"alert","alert-danger"],[4,"ngIf"],[3,"value"],[1,"gap-8","mt-15","d-flex","form-control-input",3,"formGroupName"],["formControlName","size","required","",1,"forminput"],["type","text","formControlName","price","placeholder","Gi\xe1 th\xe0nh","required","",1,"forminput"],[1,"button","bg-remove",3,"click"],["data-icon","bpmn:trash","data-width","18","data-height","18",1,"iconify",2,"color","white"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2",2),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"form",3),e.TgZ(5,"div",4),e.YNc(6,P,2,2,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"label",7),e._uU(9,"Name"),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"input",9),e.YNc(12,N,2,1,"div",10),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",11),e._uU(15,"Category"),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"select",12),e.TgZ(18,"option",13),e._uU(19,"Ch\u1ecdn lo\u1ea1i s\u1ea3n ph\u1ea9m"),e.qZA(),e.YNc(20,x,2,2,"option",14),e.qZA(),e.YNc(21,I,2,1,"div",10),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"label",11),e._uU(24,"Attributes"),e.qZA(),e.TgZ(25,"div",16),e.YNc(26,Q,11,5,"div",17),e.qZA(),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"button",19),e.NdJ("click",function(){return o.addAttr()}),e._UZ(29,"span",20),e._uU(30,"Add "),e.qZA(),e.qZA(),e.TgZ(31,"div",6),e.TgZ(32,"label",7),e._uU(33,"description"),e.qZA(),e.TgZ(34,"div",8),e._UZ(35,"textarea",21),e.YNc(36,w,2,1,"div",10),e.qZA(),e.qZA(),e.TgZ(37,"div",6),e.TgZ(38,"label",7),e._uU(39,"Image"),e.qZA(),e.TgZ(40,"div",8),e._UZ(41,"input",22),e.YNc(42,k,2,1,"div",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",23),e.TgZ(44,"button",24),e.NdJ("click",function(){return o.close()}),e._uU(45," Cancel "),e.qZA(),e.TgZ(46,"button",25),e.NdJ("click",function(){let n;return null!=o.name&&o.name.errors||null!=o.category&&o.category.errors||null!=o.descript&&o.descript.errors||null!=o.image&&o.image.errors||"INVALID"===(null==(n=o.ProductForm.get("attributes"))?null:n.status)?o.setValidator():o.save()}),e._uU(47," Ok "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(o.data.title),e.xp6(1),e.Q6J("formGroup",o.ProductForm),e.xp6(2),e.Q6J("ngIf",""!==(null==o.image?null:o.image.value)),e.xp6(6),e.Q6J("ngIf",(null==o.name?null:o.name.errors)&&o.isValidator),e.xp6(8),e.Q6J("ngForOf",o.Categorys),e.xp6(1),e.Q6J("ngIf",(null==o.category?null:o.category.errors)&&o.isValidator),e.xp6(5),e.Q6J("ngForOf",o.attributes.controls),e.xp6(10),e.Q6J("ngIf",(null==o.descript?null:o.descript.errors)&&o.isValidator),e.xp6(6),e.Q6J("ngIf",(null==o.image?null:o.image.errors)&&o.isValidator))},directives:[l._Y,l.JL,l.sg,g.O5,l.Fj,l.JJ,l.u,l.Q7,l.EJ,l.YN,l.Kr,g.sg,l.CE,l.x0],styles:[".mod-coffe[_ngcontent-%COMP%]{width:500px;position:relative}.mod-coffe-title[_ngcontent-%COMP%]{background-color:#fda026f5;padding:.5rem 1rem}.mod-coffe-body[_ngcontent-%COMP%]{display:block;position:relative;padding:.5rem 1rem;max-height:450px;overflow-y:auto}.mod-coffe-action[_ngcontent-%COMP%]{position:inherit;padding:.5rem 1rem;bottom:0;left:0}"]}),r})();var A=d(2290),R=d(6794),B=d(7407),G=d(9055),$=d(7027);const H=[{path:"",component:(()=>{class r{constructor(t,o,i,n,s){this.coffeeService=t,this.dialog=o,this.toastr=i,this.servicePublic=n,this.loadService=s,this.Products=[],this.CONTENTS_LIST_WIDTH=y.R,this.params={current_page:1,limit:5,sort:"name",reverse:!0,total_records:0,delete_all:!1},this.start=0,this.end=5,this.is=!0}loadAll(){this.loadService.start(),this.coffeeService.getProduct().subscribe(t=>{t.map((o,i)=>{var n="";o.attributes.map((s,u)=>{n+=s.size+" "}),o.size=n}),this.params.total_records=t.length,this.Products=t.slice(this.start,this.end)}),this.loadService.stop()}handlDeleteMultiple(){const t=new c.vA;t.disableClose=!0,t.autoFocus=!0,t.data={title:"X\xf3a t\xe0i kho\u1ea3n",message:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a t\xe0i nh\u1eefng kho\u1ea3n n\xe0y kh\xf4ng?"},this.dialog.open(C.z,t).afterClosed().subscribe(i=>{i&&(this.loadService.start(),this.Products.map(n=>{(null==n?void 0:n.completed)&&(this.coffeeService.deleteProduct(n.id).subscribe(),this.params.delete_all=!1)}),this.toastr.success("Th\xe0nh c\xf4ng!","X\xf3a ng\u01b0\u1eddi d\xf9ng"),this.loadAll(),this.loadService.stop())})}ngOnInit(){this.loadAll()}sortAll(t){this.loadService.start(),this.params.current_page=1,this.params.sort=t,this.loadAll(),this.loadService.stop()}openDialog(t){var o=this;return function(r){return function(){var a=this,t=arguments;return new Promise(function(o,i){var n=r.apply(a,t);function s(p){_(n,o,i,s,u,"next",p)}function u(p){_(n,o,i,s,u,"throw",p)}s(void 0)})}}(function*(){const i=new c.vA;i.disableClose=!0,i.autoFocus=!0,i.data=t?{title:"Updated Product",product:t}:{title:"Created Product",data:null},(yield o.dialog.open(V,i)).afterClosed().subscribe(s=>{t&&s&&(o.loadService.start(),o.coffeeService.updateProduct(s).subscribe(u=>{o.toastr.success("Th\xe0nh c\xf4ng!","C\u1eadp nh\u1eadt s\u1ea3n ph\u1ea9m")}),o.loadAll(),o.loadService.stop()),s&&!t&&(o.loadService.start(),s.id=o.servicePublic.Makeid(12),o.coffeeService.addProduct(s).subscribe(u=>{o.toastr.success("Th\xe0nh c\xf4ng!","T\u1ea1o s\u1ea3n ph\u1ea9m!")}),o.loadAll(),o.loadService.stop())})})()}handlSearch(t){this.loadService.start(),this.coffeeService.getProduct().subscribe(o=>{this.Products=o.filter((i,n)=>{var s="";return i.attributes.map((u,p)=>{s+=u.size+" "}),i.size=s,-1!==i.name.toLowerCase().indexOf(t.toLowerCase())||-1!==i.category.toLowerCase().indexOf(t.toLowerCase())||-1!==s.toLowerCase().indexOf(t.toLowerCase())}),this.params.total_records=this.Products.length,this.Products=this.Products.slice(this.start,this.end),this.loadService.stop()})}handlDeleteAccount(t){const o=new c.vA;o.autoFocus=!0,o.data={title:"X\xf3a s\u1ea3n ph\u1ea9m",message:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a s\u1ea3n ph\u1ea9m n\xe0y kh\xf4ng?"},this.dialog.open(C.z,o).afterClosed().subscribe(n=>{n&&(this.loadService.start(),this.coffeeService.deleteProduct(t).subscribe(s=>{this.toastr.success("Th\xe0nh c\xf4ng!","X\xf3a s\u1ea3n ph\u1ea9m"),this.loadService.stop(),this.loadAll()}))})}paramsChange(t){this.loadService.start(),this.findStart(),this.findEnd(),this.loadAll(),this.loadService.stop()}findStart(){this.start=(this.params.current_page-1)*this.params.limit}findEnd(){const t=this.params.current_page*this.params.limit;this.end=t>this.params.total_records?this.params.total_records:t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(T),e.Y36(c.uw),e.Y36(A._W),e.Y36(R.m),e.Y36(B.LA))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-coffees"]],decls:4,vars:5,consts:[[1,"mod-coffee"],[3,"title","params","modal","search","delete"],[1,"mod-coffee-body"],[3,"data","params","CONTENTS_LIST_WIDTH","modal","paramsChange","sortAll","delete"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"app-search",1),e.NdJ("modal",function(n){return o.openDialog(n)})("search",function(n){return o.handlSearch(n)})("delete",function(){return o.handlDeleteMultiple()}),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"app-apptable",3),e.NdJ("modal",function(n){return o.openDialog(n)})("paramsChange",function(n){return o.paramsChange(n)})("sortAll",function(n){return o.sortAll(n)})("delete",function(n){return o.handlDeleteAccount(n)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("title","PRODUCT MANAGEMENT")("params",o.params),e.xp6(2),e.Q6J("data",o.Products)("params",o.params)("CONTENTS_LIST_WIDTH",o.CONTENTS_LIST_WIDTH))},directives:[G.g,$.q],styles:[".mod-coffee-body[_ngcontent-%COMP%]{margin-top:27px}"]}),r})(),canActivate:[b.a]}];let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[v.Bz.forChild(H)],v.Bz]}),r})();var X=d(5642);let W=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[g.ez,K,l.UX,X.K,c.Is,A.Rh]]}),r})()}}]);